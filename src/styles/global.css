@import "tailwindcss";

/* ========================================
   BUNDU BRAND SYSTEM v6.0.0
   Nyuchi Brand - Education Category (Cobalt)
   Last Updated: 2025-12-28
   ======================================== */

@theme {
  /* ========================================
     FIVE AFRICAN MINERALS PALETTE
     ======================================== */

  /* Cobalt - Primary for Education */
  --color-cobalt-light: #0047AB;
  --color-cobalt-dark: #00B0FF;
  --color-cobalt-container-light: #E3F2FD;
  --color-cobalt-container-dark: #001F3F;
  --color-cobalt-on-container-light: #002966;
  --color-cobalt-on-container-dark: #B3E5FC;

  /* Tanzanite - Premium/Social */
  --color-tanzanite-light: #4B0082;
  --color-tanzanite-dark: #B388FF;
  --color-tanzanite-container-light: #F3E5F5;
  --color-tanzanite-container-dark: #1A0033;
  --color-tanzanite-on-container-light: #2E004D;
  --color-tanzanite-on-container-dark: #E1BEE7;

  /* Malachite - Success/Growth */
  --color-malachite-light: #004D40;
  --color-malachite-dark: #64FFDA;
  --color-malachite-container-light: #E0F2F1;
  --color-malachite-container-dark: #00251A;
  --color-malachite-on-container-light: #00332B;
  --color-malachite-on-container-dark: #A7FFEB;

  /* Gold - Rewards/Honey */
  --color-gold-light: #5D4037;
  --color-gold-dark: #FFD740;
  --color-gold-container-light: #FFF8E1;
  --color-gold-container-dark: #332200;
  --color-gold-on-container-light: #3E2723;
  --color-gold-on-container-dark: #FFECB3;

  /* Terracotta - Community/Ubuntu */
  --color-terracotta-light: #8B4513;
  --color-terracotta-dark: #D4A574;
  --color-terracotta-container-light: #FBE9E7;
  --color-terracotta-container-dark: #3E1A00;
  --color-terracotta-on-container-light: #5D2906;
  --color-terracotta-on-container-dark: #FFCCBC;

  /* ========================================
     BACKGROUND SURFACES
     ======================================== */
  --color-bg-base-light: #FAF9F5;
  --color-bg-surface-light: #FFFFFF;
  --color-bg-dim-light: #F3F2EE;
  --color-border-light: rgba(10, 10, 10, 0.08);

  --color-bg-base-dark: #0A0A0A;
  --color-bg-surface-dark: #141414;
  --color-bg-bright-dark: #1E1E1E;
  --color-border-dark: rgba(255, 255, 255, 0.08);

  /* ========================================
     TEXT COLORS
     ======================================== */
  --color-text-primary-light: #141413;
  --color-text-secondary-light: #4A4A46;
  --color-text-tertiary-light: #5C5B58;

  --color-text-primary-dark: #F5F5F4;
  --color-text-secondary-dark: #B8B8B3;
  --color-text-tertiary-dark: #9A9A95;

  /* ========================================
     SEMANTIC COLORS
     ======================================== */
  --color-success-light: #004D40;
  --color-success-dark: #64FFDA;
  --color-success-container-light: #E0F2F1;
  --color-success-container-dark: #00251A;

  --color-error-light: #B3261E;
  --color-error-dark: #F2B8B5;
  --color-error-container-light: #FFEBEE;
  --color-error-container-dark: #3B0000;

  --color-warning-light: #7A5C00;
  --color-warning-dark: #FFD866;
  --color-warning-container-light: #FFF8E1;
  --color-warning-container-dark: #332200;

  --color-info-light: #0047AB;
  --color-info-dark: #00B0FF;
  --color-info-container-light: #E3F2FD;
  --color-info-container-dark: #001F3F;

  /* ========================================
     ZIMBABWE FLAG COLORS
     ======================================== */
  --color-flag-green: #00A651;
  --color-flag-yellow: #FDD116;
  --color-flag-red: #D4634A;
  --color-flag-black: #171717;

  /* ========================================
     TYPOGRAPHY
     ======================================== */
  --font-display: 'Noto Serif', Georgia, serif;
  --font-heading: 'Plus Jakarta Sans', system-ui, sans-serif;
  --font-body: 'Plus Jakarta Sans', system-ui, sans-serif;
  --font-mono: 'JetBrains Mono', Consolas, monospace;

  /* Font Weights */
  --font-weight-light: 300;
  --font-weight-regular: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 600;
  --font-weight-bold: 700;
  --font-weight-extrabold: 800;

  /* ========================================
     TYPOGRAPHY SCALE TOKENS
     Centralized text sizing - change here, applies everywhere.
     Pages use semantic classes (.text-body, .text-body-lg, etc.)
     that reference these tokens.
     Sized to exceed benchmarks (e.g. Anthropic ~20px body).
     ======================================== */
  --text-size-body: 1.25rem;           /* 20px - standard reading text */
  --text-size-body-mobile: 1.125rem;   /* 18px - mobile reading text */
  --text-size-body-lg: 1.5rem;         /* 24px - section subtitles, lead text */
  --text-size-body-lg-mobile: 1.25rem; /* 20px - mobile lead text */
  --text-size-meta: 1.125rem;          /* 18px - dates, labels, secondary info */
  --text-size-meta-mobile: 1rem;       /* 16px - mobile meta text */
  --text-size-caption: 1rem;           /* 16px - badges, tags, short labels */

  /* ========================================
     SPACING
     ======================================== */
  --spacing-xs: 4px;
  --spacing-sm: 8px;
  --spacing-md: 16px;
  --spacing-lg: 24px;
  --spacing-xl: 32px;
  --spacing-2xl: 48px;
  --spacing-3xl: 64px;

  /* ========================================
     BORDER RADIUS
     ======================================== */
  --radius-button: 12px;
  --radius-card: 16px;
  --radius-input: 8px;
  --radius-badge: 9999px;
  --radius-app-icon: 24px;

  /* ========================================
     SHADOWS
     ======================================== */
  --shadow-sm: 0 1px 2px rgba(20, 20, 19, 0.04);
  --shadow-base: 0 2px 4px rgba(20, 20, 19, 0.06);
  --shadow-md: 0 4px 8px rgba(20, 20, 19, 0.08);
  --shadow-lg: 0 8px 16px rgba(20, 20, 19, 0.1);
  --shadow-xl: 0 16px 32px rgba(20, 20, 19, 0.12);
  --shadow-card: 0 4px 20px rgba(20, 20, 19, 0.08);
  --shadow-card-hover: 0 8px 30px rgba(20, 20, 19, 0.15);

  /* ========================================
     COMPONENT TOKENS
     ======================================== */
  /* Button Sizes */
  --btn-sm-height: 36px;
  --btn-sm-padding: 8px 16px;
  --btn-sm-font: 16px;
  --btn-sm-icon: 18px;

  --btn-default-height: 48px;
  --btn-default-padding: 12px 24px;
  --btn-default-font: 18px;
  --btn-default-icon: 20px;

  --btn-lg-height: 56px;
  --btn-lg-padding: 16px 32px;
  --btn-lg-font: 20px;
  --btn-lg-icon: 22px;

  --btn-icon-size: 44px;

  /* Input */
  --input-height: 48px;
  --input-padding: 12px 16px;
  --input-font: 18px;

  /* Navigation */
  --nav-height: 64px;
  --nav-max-width: 1200px;
  --nav-touch-target: 44px;
  --nav-blur: 24px;
  --nav-opacity: 0.7;

  /* Accessibility */
  --a11y-contrast-min: 7;
  --a11y-touch-target: 44px;
  --a11y-font-min: 18px;
}

/* ========================================
   BASE LAYER - Theme Variables
   ======================================== */
@layer base {
  /* Box-sizing reset (in base layer to work with Tailwind) */
  *, *::before, *::after {
    box-sizing: border-box;
  }

  /* Dark Mode (Default) */
  :root {
    /* Primary - Cobalt for Education */
    --primary: var(--color-cobalt-dark);
    --primary-container: var(--color-cobalt-container-dark);
    --on-primary-container: var(--color-cobalt-on-container-dark);
    --primary-hover: #33C0FF;
    --primary-active: #0090D9;

    /* Minerals */
    --mineral-cobalt: var(--color-cobalt-dark);
    --mineral-tanzanite: var(--color-tanzanite-dark);
    --mineral-malachite: var(--color-malachite-dark);
    --mineral-gold: var(--color-gold-dark);
    --mineral-terracotta: var(--color-terracotta-dark);

    /* Surfaces */
    --bg: var(--color-bg-base-dark);
    --bg-surface: var(--color-bg-surface-dark);
    --bg-elevated: var(--color-bg-bright-dark);
    --border: var(--color-border-dark);

    /* Text */
    --text: var(--color-text-primary-dark);
    --text-secondary: var(--color-text-secondary-dark);
    --text-tertiary: var(--color-text-tertiary-dark);

    /* Logo */
    --logo-bg: #0A0A0A;
    --logo-icon: #00B0FF;

    /* Semantic */
    --success: var(--color-success-dark);
    --error: var(--color-error-dark);
    --warning: var(--color-warning-dark);
    --info: var(--color-info-dark);

    /* Header */
    --header-bg: rgba(10, 10, 10, 0.98);
    --header-border: 1px solid rgba(255, 255, 255, 0.08);
    --header-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    --mobile-menu-bg: rgba(15, 23, 42, 0.98);
    --nav-link-hover: rgba(0, 176, 255, 0.1);
    --dropdown-bg: var(--color-bg-surface-dark);
    --dropdown-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);

    /* Legacy Compatibility Aliases */
    --bg-card: var(--bg-surface);
    --card-bg: var(--bg-surface);
    --bg-gray: var(--bg-surface);
    --bg-dark: var(--bg);
    --bg-accent: var(--bg-elevated);
    --background-gray: var(--bg-surface);
    --text-muted: var(--text-tertiary);
    --text-light: var(--text);
    --charcoal: var(--bg);
    --charcoal-light: var(--bg-surface);
    --charcoal-lighter: var(--bg-elevated);
    --emerald: var(--mineral-malachite);
    --emerald-hover: #7FFFDF;
    --emerald-primary: var(--mineral-malachite);
    --emerald-subtle: rgba(100, 255, 218, 0.1);
    --brown: var(--mineral-terracotta);
    --brown-hover: #E5B68A;
    --brown-dark: #A67557;
    --brown-light: #E5C4A8;
    --bg-brown: #3D2914;
    --border-light: rgba(255, 255, 255, 0.12);
    --secondary: var(--mineral-tanzanite);
    --accent: var(--mineral-gold);
    --primary-dark: #0090D9;
    --primary-light: #E3F2FD;
    --primary-subtle: #F0F9FF;

    /* Gray Scale */
    --gray-50: #F8FAFC;
    --gray-100: #F1F5F9;
    --gray-200: #E2E8F0;
    --gray-300: #CBD5E1;
    --gray-400: #94A3B8;
    --gray-500: #64748B;
    --gray-600: #475569;
    --gray-700: #334155;
    --gray-800: #1E293B;
    --gray-900: #0F172A;

    /* External Brand Colors */
    --color-linkedin: #0A66C2;
    --color-linkedin-hover: #004182;

    color-scheme: dark;
  }

  /* Light Mode - Class-based (manual toggle) */
  :root.light {
    /* Primary - Cobalt for Education */
    --primary: var(--color-cobalt-light);
    --primary-container: var(--color-cobalt-container-light);
    --on-primary-container: var(--color-cobalt-on-container-light);
    --primary-hover: #0056D2;
    --primary-active: #003580;

    /* Minerals */
    --mineral-cobalt: var(--color-cobalt-light);
    --mineral-tanzanite: var(--color-tanzanite-light);
    --mineral-malachite: var(--color-malachite-light);
    --mineral-gold: var(--color-gold-light);
    --mineral-terracotta: var(--color-terracotta-light);

    /* Surfaces */
    --bg: var(--color-bg-base-light);
    --bg-surface: var(--color-bg-surface-light);
    --bg-elevated: var(--color-bg-dim-light);
    --border: var(--color-border-light);

    /* Text */
    --text: var(--color-text-primary-light);
    --text-secondary: var(--color-text-secondary-light);
    --text-tertiary: var(--color-text-tertiary-light);

    /* Logo */
    --logo-bg: #FAF9F5;
    --logo-icon: #0047AB;

    /* Semantic */
    --success: var(--color-success-light);
    --error: var(--color-error-light);
    --warning: var(--color-warning-light);
    --info: var(--color-info-light);

    /* Header */
    --header-bg: rgba(250, 249, 245, 0.98);
    --header-border: 1px solid rgba(10, 10, 10, 0.08);
    --header-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
    --mobile-menu-bg: rgba(255, 255, 255, 0.98);
    --nav-link-hover: rgba(0, 71, 171, 0.1);
    --dropdown-bg: #FFFFFF;
    --dropdown-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);

    /* Legacy Compatibility Aliases - Light Mode */
    --bg-card: var(--bg-surface);
    --card-bg: var(--bg-surface);
    --bg-gray: var(--bg-elevated);
    --bg-dark: var(--bg-elevated);
    --bg-accent: var(--bg-elevated);
    --background-gray: var(--bg-elevated);
    --text-muted: var(--text-tertiary);
    --text-light: var(--text);
    --charcoal: var(--text);
    --charcoal-light: var(--bg-surface);
    --charcoal-lighter: var(--bg-elevated);
    --emerald: var(--mineral-malachite);
    --emerald-hover: #00695C;
    --emerald-primary: var(--mineral-malachite);
    --emerald-subtle: rgba(0, 77, 64, 0.08);
    --brown: var(--mineral-terracotta);
    --brown-hover: #A0522D;
    --brown-dark: #6B3A10;
    --brown-light: #D4A574;
    --bg-brown: #F5E6D3;
    --border-light: rgba(0, 0, 0, 0.12);
    --secondary: var(--mineral-tanzanite);
    --accent: var(--mineral-gold);
    --primary-dark: #003580;
    --primary-light: #E3F2FD;
    --primary-subtle: #F0F9FF;

    /* Gray Scale - Light Mode (inverted perception) */
    --gray-50: #0F172A;
    --gray-100: #1E293B;
    --gray-200: #334155;
    --gray-300: #475569;
    --gray-400: #64748B;
    --gray-500: #94A3B8;
    --gray-600: #CBD5E1;
    --gray-700: #E2E8F0;
    --gray-800: #F1F5F9;
    --gray-900: #F8FAFC;

    color-scheme: light;
  }

  /* Light Mode - Media query fallback (system preference) */
  @media (prefers-color-scheme: light) {
    :root:not(.dark) {
      /* Primary - Cobalt for Education */
      --primary: var(--color-cobalt-light);
      --primary-container: var(--color-cobalt-container-light);
      --on-primary-container: var(--color-cobalt-on-container-light);
      --primary-hover: #0056D2;
      --primary-active: #003580;

      /* Minerals */
      --mineral-cobalt: var(--color-cobalt-light);
      --mineral-tanzanite: var(--color-tanzanite-light);
      --mineral-malachite: var(--color-malachite-light);
      --mineral-gold: var(--color-gold-light);
      --mineral-terracotta: var(--color-terracotta-light);

      /* Surfaces */
      --bg: var(--color-bg-base-light);
      --bg-surface: var(--color-bg-surface-light);
      --bg-elevated: var(--color-bg-dim-light);
      --border: var(--color-border-light);

      /* Text */
      --text: var(--color-text-primary-light);
      --text-secondary: var(--color-text-secondary-light);
      --text-tertiary: var(--color-text-tertiary-light);

      /* Logo */
      --logo-bg: #FAF9F5;
      --logo-icon: #0047AB;

      /* Semantic */
      --success: var(--color-success-light);
      --error: var(--color-error-light);
      --warning: var(--color-warning-light);
      --info: var(--color-info-light);

      /* Legacy Compatibility Aliases - Light Mode */
      --bg-card: var(--bg-surface);
      --card-bg: var(--bg-surface);
      --bg-gray: var(--bg-elevated);
      --bg-dark: var(--bg-elevated);
      --bg-accent: var(--bg-elevated);
      --background-gray: var(--bg-elevated);
      --text-muted: var(--text-tertiary);
      --text-light: var(--text);
      --charcoal: var(--text);
      --charcoal-light: var(--bg-surface);
      --charcoal-lighter: var(--bg-elevated);
      --emerald: var(--mineral-malachite);
      --emerald-hover: #00695C;
      --emerald-primary: var(--mineral-malachite);
      --emerald-subtle: rgba(0, 77, 64, 0.08);
      --brown: var(--mineral-terracotta);
      --brown-hover: #A0522D;
      --brown-dark: #6B3A10;
      --brown-light: #D4A574;
      --bg-brown: #F5E6D3;
      --border-light: rgba(0, 0, 0, 0.12);
      --secondary: var(--mineral-tanzanite);
      --accent: var(--mineral-gold);
      --primary-dark: #003580;
      --primary-light: #E3F2FD;
      --primary-subtle: #F0F9FF;

      /* Gray Scale - Light Mode (inverted perception) */
      --gray-50: #0F172A;
      --gray-100: #1E293B;
      --gray-200: #334155;
      --gray-300: #475569;
      --gray-400: #64748B;
      --gray-500: #94A3B8;
      --gray-600: #CBD5E1;
      --gray-700: #E2E8F0;
      --gray-800: #F1F5F9;
      --gray-900: #F8FAFC;

      color-scheme: light;
    }
  }

  /* HTML & Body */
  html {
    font-family: var(--font-body);
    background-color: var(--bg);
    color: var(--text);
    scroll-behavior: smooth;
  }

  body {
    min-height: 100vh;
    background-color: var(--bg);
    color: var(--text);
    line-height: 1.7;
    font-size: 20px;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Typography Scale - Fluid responsive sizing with clamp() */
  h1 {
    font-family: var(--font-display);
    font-size: clamp(2rem, 6vw, 4rem);
    font-weight: var(--font-weight-bold);
    line-height: 1.1;
    letter-spacing: -0.02em;
    color: var(--text);
  }

  h2 {
    font-family: var(--font-heading);
    font-size: clamp(1.75rem, 4vw, 3rem);
    font-weight: var(--font-weight-bold);
    line-height: 1.2;
    color: var(--text);
  }

  h3 {
    font-family: var(--font-heading);
    font-size: clamp(1.375rem, 3vw, 1.75rem);
    font-weight: var(--font-weight-semibold);
    line-height: 1.3;
    color: var(--text);
  }

  h4 {
    font-family: var(--font-heading);
    font-size: clamp(1.25rem, 2.5vw, 1.5rem);
    font-weight: var(--font-weight-semibold);
    line-height: 1.4;
    color: var(--text);
  }

  h5 {
    font-family: var(--font-heading);
    font-size: 1.25rem;
    font-weight: var(--font-weight-semibold);
    line-height: 1.4;
    color: var(--text);
  }

  h6 {
    font-family: var(--font-heading);
    font-size: 1.125rem;
    font-weight: var(--font-weight-semibold);
    line-height: 1.4;
    color: var(--text);
  }

  p {
    font-size: inherit;
    line-height: 1.7;
    color: var(--text);
  }

  a {
    color: var(--primary);
    text-decoration: none;
    transition: opacity 0.2s;
  }

  a:hover {
    opacity: 0.8;
  }

  /* Focus states - see WCAG 2.2 AAA section below for comprehensive rules */

  /* Code */
  code, pre {
    font-family: var(--font-mono);
  }

  /* Mobile body text - 18px minimum on small screens */
  @media (max-width: 768px) {
    body {
      font-size: 18px;
    }
  }
}

/* ========================================
   COMPONENT LAYER
   ======================================== */
@layer components {
  /* Standard Card - 1px border */
  .card {
    background: var(--bg-surface);
    border-radius: var(--radius-card);
    border: 1px solid var(--border);
    padding: var(--spacing-lg);
    transition: transform 0.3s, border-color 0.3s, box-shadow 0.3s;
  }

  .card:hover {
    transform: translateY(-2px);
    border-color: var(--primary);
    box-shadow: var(--shadow-card-hover);
  }

  /* Accent Card - 2px primary border */
  .card-accent {
    background: var(--bg-surface);
    border-radius: var(--radius-card);
    border: 2px solid var(--primary);
    padding: var(--spacing-lg);
  }

  /* Primary Button */
  .btn-primary {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-sm);
    background: var(--primary);
    color: white;
    font-family: var(--font-body);
    font-weight: var(--font-weight-semibold);
    font-size: var(--btn-default-font);
    height: var(--btn-default-height);
    padding: var(--btn-default-padding);
    border-radius: var(--radius-button);
    border: none;
    cursor: pointer;
    transition: filter 0.2s, transform 0.2s, box-shadow 0.2s;
  }

  .btn-primary:hover {
    filter: brightness(1.1);
    transform: translateY(-1px);
    box-shadow: var(--shadow-md);
  }

  .btn-primary:active {
    filter: brightness(0.95);
    transform: translateY(0);
  }

  /* Secondary/Outline Button */
  .btn-secondary {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-sm);
    background: transparent;
    color: var(--primary);
    font-family: var(--font-body);
    font-weight: var(--font-weight-semibold);
    font-size: var(--btn-default-font);
    height: var(--btn-default-height);
    padding: var(--btn-default-padding);
    border-radius: var(--radius-button);
    border: 1.5px solid var(--primary);
    cursor: pointer;
    transition: background 0.2s;
  }

  .btn-secondary:hover {
    background: var(--primary-container);
  }

  /* Large Button */
  .btn-lg {
    height: var(--btn-lg-height);
    padding: var(--btn-lg-padding);
    font-size: var(--btn-lg-font);
  }

  /* Small Button */
  .btn-sm {
    height: var(--btn-sm-height);
    padding: var(--btn-sm-padding);
    font-size: var(--btn-sm-font);
  }

  /* Container */
  .container {
    max-width: var(--nav-max-width);
    margin: 0 auto;
    padding: 0 var(--spacing-xl);
  }

  @media (max-width: 768px) {
    .container {
      padding: 0 var(--spacing-md);
    }
  }

  /* Section */
  .section {
    padding: var(--spacing-3xl) 0;
  }

  @media (max-width: 768px) {
    .section {
      padding: var(--spacing-2xl) 0;
    }

    /* Mobile button sizing - full width in flex containers */
    .btn-primary,
    .btn-secondary {
      min-height: 48px;  /* Touch target compliance */
      width: 100%;  /* Full width on mobile */
    }

    /* Card padding optimization */
    .card,
    .card-accent {
      padding: var(--spacing-md);  /* 16px instead of 24px */
    }
  }

  @media (max-width: 480px) {
    .section {
      padding: var(--spacing-lg) 0;  /* 24px on extra small screens */
    }
  }

  /* Input */
  .input {
    height: var(--input-height);
    padding: var(--input-padding);
    font-size: var(--input-font);
    font-family: var(--font-body);
    background: var(--bg-surface);
    border: 1px solid var(--border);
    border-radius: var(--radius-input);
    color: var(--text);
    transition: border-color 0.2s, box-shadow 0.2s;
  }

  .input:focus {
    border-color: var(--primary);
    box-shadow: 0 0 0 3px var(--primary-container);
  }

  /* Hero dot grid background - applied to hero sections only */
  .hero-dots {
    background-image: radial-gradient(circle, rgba(100, 116, 139, 0.12) 1px, transparent 1px);
    background-size: 24px 24px;
  }

  :root.light .hero-dots {
    background-image: radial-gradient(circle, rgba(100, 116, 139, 0.15) 1px, transparent 1px);
  }

  @media (prefers-color-scheme: light) {
    :root:not(.dark) .hero-dots {
      background-image: radial-gradient(circle, rgba(100, 116, 139, 0.15) 1px, transparent 1px);
    }
  }

  /* Badge */
  .badge {
    display: inline-flex;
    align-items: center;
    padding: 4px 12px;
    font-size: var(--text-size-caption);
    font-weight: var(--font-weight-medium);
    border-radius: var(--radius-badge);
    background: var(--primary-container);
    color: var(--on-primary-container);
  }

  /* ========================================
     SEMANTIC TYPOGRAPHY SYSTEM
     Centralized, responsive text sizing.
     Use these classes instead of raw Tailwind
     text-sm / text-base / text-lg on content.
     Sizes reference @theme tokens so changes
     propagate from a single source of truth.
     ======================================== */

  /* Body text - paragraphs, descriptions, list items, card content */
  .text-body {
    font-size: var(--text-size-body);
    line-height: 1.7;
  }

  /* Body large - section subtitles, lead paragraphs, featured descriptions */
  .text-body-lg {
    font-size: var(--text-size-body-lg);
    line-height: 1.6;
  }

  /* Meta text - dates, labels, secondary information, form hints */
  .text-meta {
    font-size: var(--text-size-meta);
    line-height: 1.5;
  }

  /* Caption - badges, tags, very short decorative labels */
  .text-caption {
    font-size: var(--text-size-caption);
    line-height: 1.4;
  }

  /* Mobile responsive adjustments - baked into the classes */
  @media (max-width: 640px) {
    .text-body {
      font-size: var(--text-size-body-mobile);
    }
    .text-body-lg {
      font-size: var(--text-size-body-lg-mobile);
    }
    .text-meta {
      font-size: var(--text-size-meta-mobile);
    }
  }
}

/* ========================================
   UTILITY LAYER
   ======================================== */
@layer utilities {
  /* Text Colors */
  .text-primary {
    color: var(--primary);
  }

  .text-secondary {
    color: var(--text-secondary);
  }

  .text-tertiary {
    color: var(--text-tertiary);
  }

  /* Background Colors */
  .bg-base {
    background-color: var(--bg);
  }

  .bg-surface {
    background-color: var(--bg-surface);
  }

  .bg-elevated {
    background-color: var(--bg-elevated);
  }

  /* Border */
  .border-default {
    border-color: var(--border);
  }

  .border-primary {
    border-color: var(--primary);
  }

  /* Mineral Colors */
  .text-cobalt { color: var(--mineral-cobalt); }
  .text-tanzanite { color: var(--mineral-tanzanite); }
  .text-malachite { color: var(--mineral-malachite); }
  .text-gold { color: var(--mineral-gold); }
  .text-terracotta { color: var(--mineral-terracotta); }

  .bg-cobalt { background-color: var(--mineral-cobalt); }
  .bg-tanzanite { background-color: var(--mineral-tanzanite); }
  .bg-malachite { background-color: var(--mineral-malachite); }
  .bg-gold { background-color: var(--mineral-gold); }
  .bg-terracotta { background-color: var(--mineral-terracotta); }

  /* Minerals Strip - 4px vertical left edge */
  .minerals-strip {
    position: fixed;
    left: 0;
    top: 0;
    width: 4px;
    height: 100vh;
    z-index: 9999;
    display: flex;
    flex-direction: column;
  }

  .minerals-strip > div {
    flex: 1;
  }

  /* Hide minerals strip on mobile */
  @media (max-width: 480px) {
    .minerals-strip {
      display: none;
    }
  }

  /* Semantic Colors */
  .text-success { color: var(--success); }
  .text-error { color: var(--error); }
  .text-warning { color: var(--warning); }
  .text-info { color: var(--info); }

  /* Font Families */
  .font-display { font-family: var(--font-display); }
  .font-heading { font-family: var(--font-heading); }
  .font-body { font-family: var(--font-body); }
  .font-mono { font-family: var(--font-mono); }

  /* Font Weights */
  .font-light { font-weight: var(--font-weight-light); }
  .font-regular { font-weight: var(--font-weight-regular); }
  .font-medium { font-weight: var(--font-weight-medium); }
  .font-semibold { font-weight: var(--font-weight-semibold); }
  .font-bold { font-weight: var(--font-weight-bold); }
  .font-extrabold { font-weight: var(--font-weight-extrabold); }

  /* Shadows */
  .shadow-sm { box-shadow: var(--shadow-sm); }
  .shadow-base { box-shadow: var(--shadow-base); }
  .shadow-md { box-shadow: var(--shadow-md); }
  .shadow-lg { box-shadow: var(--shadow-lg); }
  .shadow-xl { box-shadow: var(--shadow-xl); }
  .shadow-card { box-shadow: var(--shadow-card); }

  /* Border Radius */
  .rounded-button { border-radius: var(--radius-button); }
  .rounded-card { border-radius: var(--radius-card); }
  .rounded-input { border-radius: var(--radius-input); }
  .rounded-badge { border-radius: var(--radius-badge); }
}

/* ========================================
   REDUCED MOTION
   ======================================== */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* ========================================
   WCAG 2.2 AAA ACCESSIBILITY ENHANCEMENTS
   ======================================== */

/* Skip Links - Allow keyboard users to bypass navigation */
.skip-link {
  position: absolute;
  top: -9999px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 10000;
  background: var(--primary);
  color: white;
  padding: 1rem 2rem;
  border-radius: var(--radius-button);
  font-weight: var(--font-weight-semibold);
  font-size: 1rem;
  text-decoration: none;
  transition: top 0.3s ease;
}

.skip-link:focus {
  top: 0.75rem;
  outline: 3px solid white;
  outline-offset: 2px;
}

.light .skip-link:focus {
  outline-color: var(--text);
}

/* Screen Reader Only - Visually hidden but accessible */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Screen Reader Only - Focusable variant */
.sr-only-focusable:focus,
.sr-only-focusable:active {
  position: static;
  width: auto;
  height: auto;
  padding: inherit;
  margin: inherit;
  overflow: visible;
  clip: auto;
  white-space: normal;
}

/* Enhanced Focus Indicators (WCAG 2.2 AAA - 3:1 contrast minimum) */
*:focus {
  outline: none;
}

*:focus-visible {
  outline: 3px solid var(--primary);
  outline-offset: 3px;
  border-radius: 2px;
}

/* High contrast focus for dark backgrounds */
.dark *:focus-visible,
:root:not(.light) *:focus-visible {
  outline-color: var(--mineral-cobalt);
  box-shadow: 0 0 0 2px var(--bg), 0 0 0 5px var(--mineral-cobalt);
}

/* Light mode focus */
.light *:focus-visible {
  outline-color: var(--primary);
  box-shadow: 0 0 0 2px var(--bg), 0 0 0 5px var(--primary);
}

@media (prefers-color-scheme: light) {
  :root:not(.dark) *:focus-visible {
    outline-color: var(--primary);
    box-shadow: 0 0 0 2px var(--bg), 0 0 0 5px var(--primary);
  }
}

/* Remove default button focus in favor of custom */
button:focus-visible,
[role="button"]:focus-visible {
  outline: 3px solid var(--primary);
  outline-offset: 2px;
}

/* Link focus states */
a:focus-visible {
  outline: 3px solid var(--primary);
  outline-offset: 2px;
  text-decoration: underline;
  text-decoration-thickness: 2px;
}

/* Form element focus */
input:focus-visible,
textarea:focus-visible,
select:focus-visible {
  outline: 3px solid var(--primary);
  outline-offset: 0;
  border-color: var(--primary);
}

/* Target Size (WCAG 2.2 AAA - 44x44px minimum) */
.touch-target {
  min-width: 44px;
  min-height: 44px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

/* Ensure interactive elements meet minimum target size */
button,
[role="button"],
a,
input[type="checkbox"],
input[type="radio"],
select {
  min-height: 44px;
}

/* Exception for inline links in body text */
p a,
li a,
td a {
  min-height: auto;
}

/* High Contrast Mode Support */
@media (prefers-contrast: more) {
  :root {
    --border: rgba(255, 255, 255, 0.3);
  }

  .light {
    --border: rgba(0, 0, 0, 0.3);
  }

  * {
    border-color: currentColor !important;
  }

  a {
    text-decoration: underline;
    text-decoration-thickness: 2px;
  }

  button,
  [role="button"] {
    border: 2px solid currentColor;
  }
}

/* Forced Colors Mode (Windows High Contrast) */
@media (forced-colors: active) {
  *:focus-visible {
    outline: 3px solid CanvasText;
    outline-offset: 3px;
  }

  a {
    color: LinkText;
  }

  button,
  [role="button"] {
    border: 2px solid ButtonText;
    background: ButtonFace;
    color: ButtonText;
  }

  .btn-primary {
    background: Highlight;
    color: HighlightText;
    border-color: Highlight;
  }
}

/* Text Spacing Override Support (WCAG 2.1 SC 1.4.12) */
/* Users can override these values without breaking layout */
html {
  line-height: 1.7; /* Generous for comfortable reading */
  letter-spacing: 0.00em; /* Can be increased to 0.12em */
  word-spacing: 0.00em; /* Can be increased to 0.16em */
}

p {
  margin-bottom: 1.5em; /* At least 2x font size for paragraph spacing */
}

/* Ensure text reflows properly when spacing is increased */
* {
  text-size-adjust: 100%;
  -webkit-text-size-adjust: 100%;
}

/* Visible Focus for Non-Interactive Elements with tabindex */
[tabindex]:not([tabindex="-1"]):focus-visible {
  outline: 3px solid var(--primary);
  outline-offset: 3px;
}

/* Improved Selection Contrast */
::selection {
  background: var(--primary);
  color: white;
}

::-moz-selection {
  background: var(--primary);
  color: white;
}

/* Light mode selection */
.light ::selection,
.light ::-moz-selection {
  background: var(--primary);
  color: white;
}

@media (prefers-color-scheme: light) {
  :root:not(.dark) ::selection,
  :root:not(.dark) ::-moz-selection {
    background: var(--primary);
    color: white;
  }
}

/* Landmark Region Styles for Assistive Technology */
[role="main"],
[role="navigation"],
[role="banner"],
[role="contentinfo"],
[role="complementary"],
[role="search"] {
  outline: none;
}

/* Ensure adequate line length for readability (~65 characters) */
.readable-width {
  max-width: 65ch;
}

article p,
article li {
  max-width: 65ch;
}

/* Motion Preferences - Additional Safety */
@media (prefers-reduced-motion: reduce) {
  html {
    scroll-behavior: auto;
  }

  *,
  *::before,
  *::after {
    background-attachment: scroll !important;
    animation: none !important;
    transition: none !important;
  }

  /* Allow essential animations with very short duration */
  .essential-animation {
    animation-duration: 0.001s !important;
  }
}

/* Print Accessibility */
@media print {
  *:focus-visible {
    outline: 2px solid black;
  }

  a[href]::after {
    content: " (" attr(href) ")";
    font-size: 0.8em;
    color: #666;
  }

  abbr[title]::after {
    content: " (" attr(title) ")";
  }

  /* Don't print decorative elements */
  .minerals-strip,
  .skip-link,
  [aria-hidden="true"] {
    display: none !important;
  }
}

/* Notification/Alert Accessibility */
[role="alert"],
[role="status"],
[aria-live] {
  /* Ensure screen readers announce these */
}

/* Error State Accessibility */
[aria-invalid="true"],
.error,
.invalid {
  border-color: var(--error) !important;
  outline-color: var(--error);
}

[aria-invalid="true"]:focus-visible,
.error:focus-visible,
.invalid:focus-visible {
  outline-color: var(--error);
  box-shadow: 0 0 0 2px var(--bg), 0 0 0 5px var(--error);
}

/* Disabled State Accessibility */
[disabled],
[aria-disabled="true"],
.disabled {
  opacity: 0.6;
  cursor: not-allowed;
  pointer-events: none;
}

/* Loading State Accessibility */
[aria-busy="true"] {
  cursor: wait;
}

/* Current Page Indicator for Navigation */
[aria-current="page"],
[aria-current="true"] {
  font-weight: var(--font-weight-bold);
  text-decoration: underline;
  text-decoration-thickness: 2px;
}

/* Tooltip Accessibility */
[data-tooltip] {
  position: relative;
}

[data-tooltip]::after {
  content: attr(data-tooltip);
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  padding: 0.5rem 1rem;
  background: var(--bg-surface);
  color: var(--text);
  border: 1px solid var(--border);
  border-radius: var(--radius-input);
  font-size: 1rem;
  white-space: nowrap;
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.2s, visibility 0.2s;
  z-index: 1000;
}

[data-tooltip]:hover::after,
[data-tooltip]:focus-visible::after {
  opacity: 1;
  visibility: visible;
}

@media (prefers-reduced-motion: reduce) {
  [data-tooltip]::after {
    transition: none;
  }
}
